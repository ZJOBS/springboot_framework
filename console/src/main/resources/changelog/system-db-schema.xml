<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="create_system_dictionary" author="zhang">
        <sql>
            CREATE TABLE system_dictionary (
            dict_id varchar(20) NOT NULL,
            code varchar(45) NOT NULL,
            value varchar(45) DEFAULT NULL,
            activating tinyint(1) NOT NULL DEFAULT 0,
            name varchar(45) DEFAULT NULL,
            parent_id varchar(20) DEFAULT '0',
            PRIMARY KEY (dict_id),
            UNIQUE KEY id_UNIQUE (dict_id)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
        </sql>
    </changeSet>

    <changeSet id="create_system_admin" author="zhang">
        <sql>
            CREATE TABLE `system_admin` (
            `admin_id` varchar(20) NOT NULL,
            `name` varchar(20) NOT NULL COMMENT '管理员名称',
            `avatar` varchar(20) DEFAULT NULL,
            `activating` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否激活，0禁用、1启用',
            `password` varchar(120) NOT NULL COMMENT '管理员登入密码',
            `description` text DEFAULT NULL COMMENT '说明',
            `create_ datetime` timestamp NULL DEFAULT current_timestamp(),
            `update_ datetime` timestamp NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
            PRIMARY KEY (`admin_id`),
            UNIQUE KEY `id_UNIQUE` (`admin_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
        </sql>
    </changeSet>

    <changeSet id="add_system_admin" author="zhang">
        <insert tableName="system_admin">
            <column name="admin_id" value="1"/>
            <column name="name" value="zhangjie"/>
            <column name="activating" value="1"/>
            <column name="password" value="c5c36892a1af06cb6ec9"/>
            <column name="description" value="系统初始账户"/>
        </insert>
        <insert tableName="system_admin">
            <column name="admin_id" value="2"/>
            <column name="name" value="ZJOBS"/>
            <column name="activating" value="1"/>
            <column name="password" value="c5c36892a1af06cb6ec9"/>
            <column name="description" value="系统初始账户"/>
        </insert>
        <insert tableName="system_admin">
            <column name="admin_id" value="324686962734661632"/>
            <column name="name" value="ZJOBS_0射手"/>
            <column name="activating" value="1"/>
            <column name="password" value="c5c36892a1af06cb6ec9"/>
            <column name="description" value="系统初始账户"/>
        </insert>
        <insert tableName="system_admin">
            <column name="admin_id" value="451894153022935040"/>
            <column name="name" value="上海理工"/>
            <column name="activating" value="1"/>
            <column name="password" value="c5c36892a1af06cb6ec9"/>
            <column name="description" value="上理毕业设计"/>
        </insert>
    </changeSet>

    <changeSet id="create_system_log" author="zhang">
        <sql>
            CREATE TABLE `system_log` (
            `log_id` varchar(20) NOT NULL,
            `admin_id` varchar(20) NOT NULL,
            `module_name` varchar(45) NOT NULL,
            `method` varchar(45) NOT NULL,
            `response_date` varchar(45) DEFAULT NULL,
            `ip` varchar(45) NOT NULL,
            `result` varchar(45) DEFAULT NULL,
            `date_time` timestamp NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
            PRIMARY KEY (`log_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
        </sql>
    </changeSet>

    <changeSet id="create_system_menu" author="zhang">
        <sql>
            CREATE TABLE `system_menu` (
            `menu_id` varchar(20) NOT NULL,
            `parent_id` varchar(20) DEFAULT NULL,
            `name` varchar(100) DEFAULT NULL,
            `url` varchar(100) DEFAULT NULL,
            `activating` tinyint(1) DEFAULT 0,
            `image` varchar(20) DEFAULT NULL,
            `leaf` tinyint(1) DEFAULT NULL,
            `create_ datetime` timestamp NULL DEFAULT current_timestamp(),
            `update_ datetime` timestamp NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
            PRIMARY KEY (`menu_id`),
            UNIQUE KEY `system_menu_id_uindex` (`menu_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
        </sql>
    </changeSet>
    <!--    <changeSet id="add_system_menu" author="zhang">-->
    <!--        <sql>-->
    <!--            -->
    <!--        </sql>-->
    <!--    </changeSet>-->


    <changeSet id="create_system_role" author="zhang">
        <sql>
            CREATE TABLE `system_role` (
            `role_id` varchar(20) NOT NULL,
            `name` varchar(20) NOT NULL,
            `activating` tinyint(4) NOT NULL DEFAULT 0,
            `description` text DEFAULT NULL,
            PRIMARY KEY (`role_id`),
            UNIQUE KEY `system_role_id_uindex` (`role_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
        </sql>
    </changeSet>

    <!--    <changeSet id="add_system_role" author="zhang">-->
    <!--        <insert tableName="system_role">-->
    <!--            <column name="role_id" value="325035890382471168"/>-->
    <!--            <column name="name" value="系统管理员"/>-->
    <!--            <column name="activating" value="1"/>-->
    <!--        </insert>-->
    <!--    </changeSet>-->

    <changeSet id="create_system_role_menu" author="zhang">
        <sql>
            CREATE TABLE `system_role_menu` (
            `role_menu_id` varchar(20) NOT NULL,
            `role_id` varchar(20) NOT NULL DEFAULT '角色编号',
            `menu_id` varchar(20) NOT NULL DEFAULT '菜单编号',
            PRIMARY KEY (`role_menu_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
        </sql>
    </changeSet>

    <changeSet id="create_system_admin_role" author="zhang">
        <sql>
            CREATE TABLE `system_admin_role` (
            `admin_role_id` varchar(20) NOT NULL,
            `admin_id` varchar(20) NOT NULL DEFAULT '管理员编号',
            `role_id` varchar(20) NOT NULL DEFAULT '角色编号',
            PRIMARY KEY (`admin_role_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
        </sql>
    </changeSet>
</databaseChangeLog>
